import{_ as t,c as l,a as i,b as e,d as n,o as d,r as p}from"./app-CmDRsYk_.js";const h="/docs/assets/1-BR47BrqJ.png",r="/docs/assets/2-Bq-26EVP.png",c="/docs/assets/8-BPCUAmS-.png",o="/docs/assets/3-Dc6IvxNk.png",k="/docs/assets/4-DRaTOsA0.png",u="/docs/assets/5-N5wU9R2Y.png",v="/docs/assets/6-BAmOOkyl.png",g="/docs/assets/7-DrRmTlss.png",m="/docs/assets/9-DwAW3U29.png",b={},A={class:"hint-container tip"};function y(D,s){const a=p("VideoBilibili");return d(),l("div",null,[s[2]||(s[2]=i("h2",{id:"启用wsl服务",tabindex:"-1"},[i("a",{class:"header-anchor",href:"#启用wsl服务"},[i("span",null,"启用WSL服务")])],-1)),s[3]||(s[3]=i("h3",{id:"什么是wsl-如何使用",tabindex:"-1"},[i("a",{class:"header-anchor",href:"#什么是wsl-如何使用"},[i("span",null,"什么是WSL？如何使用？")])],-1)),e(a,{src:"https://player.bilibili.com/player.html?bvid=BV1tW42197za&autoplay=0",width:"100%",height:"",ratio:"",title:"undefined"}),s[4]||(s[4]=n('<p>我们将基于视频中介绍的几点<code>便利功能</code>，搭建无人机仿真环境</p><h3 id="下载ubuntu" tabindex="-1"><a class="header-anchor" href="#下载ubuntu"><span>下载Ubuntu</span></a></h3><p>根据视频中的流程<mark>开启windows系统的WSL服务</mark></p><p>接着，我们下载<mark>Ubuntu20.04版本</mark>（之后会解释为什么需要这个版本）</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">wsl</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --install</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> Ubuntu-20.04</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --web-download</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>如果出现以下问题，可以下载<a href="https://steampp.net/" target="_blank" rel="noopener noreferrer">Watt Toolkit</a>尝试加速 <img src="'+h+`" alt=""></p></div><h3 id="基本配置" tabindex="-1"><a class="header-anchor" href="#基本配置"><span>基本配置</span></a></h3><h4 id="默认用户配置" tabindex="-1"><a class="header-anchor" href="#默认用户配置"><span><mark>默认用户配置</mark></span></a></h4><p>因为我们之后会进行大量<code>import</code>和<code>export</code>的备份操作，而在还原备份文件时，会默认为<code>root</code>用户，所以我们需要<mark>将默认用户修改为我们自己创建的用户</mark></p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> vim</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/wsl.conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>这里使用<code>vim</code>对文件内容进行编辑，初次使用可能会感觉有点<code>反人类😰</code></p><p>首先，按<code>i</code>进入编辑模式（左下角出现<code>INSERT</code>）</p><p>然后，在文件中添加以下内容</p><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>[user]</span></span>
<span class="line"><span>default=你的用户名</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>最后，按<code>ESC</code>退出<code>INSERT</code>模式，按<code>:wq</code>来保存退出vim</p>`,15)),i("div",A,[s[0]||(s[0]=i("p",{class:"hint-container-title"},"提示",-1)),s[1]||(s[1]=i("p",null,"感兴趣的同学可以通过以下视频学习vim的基本用法",-1)),e(a,{src:"https://player.bilibili.com/player.html?bvid=BV13t4y1t7Wg&autoplay=0",width:"100%",height:"",ratio:"",title:"undefined"})]),s[5]||(s[5]=n(`<h4 id="显示优化-可选" tabindex="-1"><a class="header-anchor" href="#显示优化-可选"><span>显示优化（可选）</span></a></h4><div class="hint-container warning"><p class="hint-container-title">注意</p><p>此步设置仅供参考，最好还是不要执行，因为我后来发现了一些显示上的恶性bug</p></div><p>因为我们之后会用到gazebo的图形化窗口，可能会出现字体太小等问题，我们可以通过修改环境变量的方式来解决</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">vim</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ~/.bashrc</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>按住<code>shift+g</code>或者<code>大写的G</code>就可以跳转到文件底部，在底部添加</p><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span># &gt;&gt;&gt; zoom application windows &gt;&gt;&gt;</span></span>
<span class="line"><span>export QT_QPA_PLATFORM=&quot;wayland;xcb&quot;</span></span>
<span class="line"><span>export QT_AUTO_SCREEN_SCALE_FACTOR=0</span></span>
<span class="line"><span>export QT_ENABLE_HIGHDPI_SCALING=0</span></span>
<span class="line"><span>export QT_SCALE_FACTOR=1.5 # 此处调节缩放比例</span></span>
<span class="line"><span># &lt;&lt;&lt; zoom application windows &lt;&lt;&lt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>退出<code>vim</code>，并输入以使得刚刚的修改生效</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">source</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ~/.bashrc</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>.bashrc是bash终端的配置文件，感兴趣的同学可以自行搜索</p></div><h4 id="vs-code服务-十分重要" tabindex="-1"><a class="header-anchor" href="#vs-code服务-十分重要"><span><mark>vs code服务（十分重要！）</mark></span></a></h4><p>使用vim是不是还挺麻烦的？其实我们可以用windows上的<code>vs code</code>来修改文件（为什么不早说😢）</p><p>首先，在vs code上找到<code>WSL</code>插件并下载，启用</p><p>接着，只需要在终端输入</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">code</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>等待下载完成就可以了！</p><h2 id="安装ros" tabindex="-1"><a class="header-anchor" href="#安装ros"><span>安装ROS</span></a></h2><p><strong>正片开始！</strong></p><p>我们使用小鱼ROS一键安装，原因就是这个脚本可以自动帮我们配置网络环境，找到合适的版本，安心省事！</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">wget</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://fishros.com/install</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -O</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> fishros</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>这个指令可以帮助我们下载到安装脚本</p><p>运行脚本</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">.</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> fishros</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>接着我们跟着引导，选择安装ROS，由于我们还没换源，可以选择换源</p><p>接着我么选择<mark>安装ROS1 noetic的桌面版</mark>，因为我发现网上有关ROS1的教程会更多一些（这也是我为何选择Ubuntu20.04的原因）</p><p>安装完成后，我们可以新建一个终端，输入<code>roscore</code>查看是否安装成功</p><p><img src="`+r+`" alt=""></p><p>检查完毕，按住<code>ctrl+C</code>可以结束进程</p><div class="hint-container tip"><p class="hint-container-title">提示</p><p>我们还可以用小鱼脚本安装rosdep（可选）</p></div><h2 id="安装mavros" tabindex="-1"><a class="header-anchor" href="#安装mavros"><span>安装MAVROS</span></a></h2><p>MAVROS是一个ROS软件包，有了它就可以让ROS与飞控通信。</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ros-</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">$ROS_DISTRO</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">-mavros</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ros-</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">$ROS_DISTRO</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">-mavros-extras</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> clone</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> https://gitee.com/tyx6/geographiclib_datasets_tools.git</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> geographiclib_datasets_tools/</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">chmod</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> a+x</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ./install_geographiclib_datasets.sh</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ./install_geographiclib_datasets.sh</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>下载完成后输入<code>roscd mavros</code>，如果发现跳转到了<code>/opt/ros/noetic/share/mavros</code>目录，即代表安装成功</p><h2 id="下载qgroundcontrol" tabindex="-1"><a class="header-anchor" href="#下载qgroundcontrol"><span>下载QGroundControl</span></a></h2><p>前往官网<a href="https://qgroundcontrol.com/" target="_blank" rel="noopener noreferrer">QGroundControl</a>，下载windows版本，可以直接与我们的linux子系统搭建的仿真环境联通！</p><p>安装windows版本的过程，类似于windows上下载其他应用的过程，所以这里就不赘述了</p><p>这里推荐启用虚拟手柄，方便控制</p><p><img src="`+c+`" alt=""></p><h2 id="克隆px4仓库" tabindex="-1"><a class="header-anchor" href="#克隆px4仓库"><span>克隆PX4仓库</span></a></h2><h3 id="方法1-从github上克隆源代码-不推荐" tabindex="-1"><a class="header-anchor" href="#方法1-从github上克隆源代码-不推荐"><span>方法1：从github上克隆源代码（不推荐）</span></a></h3><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> clone</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> https://github.com/PX4/PX4-Autopilot.git</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 下载源码</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mv</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PX4-Autopilot</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PX4_Firmware</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 更改目录名</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PX4_Firmware</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> checkout</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -b</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dev</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> v1.13.2</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 切换版本</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> submodule</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> update</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --init</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --recursive</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">   # 更新下载子模块</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 比较慢，可能需要使用镜像源</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="方法2-使用网盘或者从qq群下载" tabindex="-1"><a class="header-anchor" href="#方法2-使用网盘或者从qq群下载"><span>方法2：使用网盘或者从QQ群下载</span></a></h3><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 在windows上的下载路径是以挂载卷的形式</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mv</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 下载的路径/PX4_Firmware_v1.13.2.zip</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ~</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 移动到linux的工作目录里</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 当然，你也可以直接从资源管理器中拖过去</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> unzip</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 下载解压工具</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">unzip</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PX4_Firmware_v1.13.2.zip</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>解压完成后，执行以下指令，添加可执行脚本</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">rm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PX4_Firmware_v1.13.2.zip</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 可以删除压缩包</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PX4_Firmware</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">wget</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> https://gitee.com/tyx6/mytools/raw/main/px4/set_executable.sh</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">chmod</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> +x</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> set_executable.sh</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 设置权限</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">./set_executable.sh</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">         # 执行</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="安装相关依赖和gazebo" tabindex="-1"><a class="header-anchor" href="#安装相关依赖和gazebo"><span>安装相关依赖和gazebo</span></a></h2><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ~/PX4_Firmware/Tools/setup</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">chmod</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> +x</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ubuntu.sh</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">./ubuntu.sh</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --no-nuttx</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 脚本执行时间，跟个人网络有关，可能需要一段时间</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>这是官方提供的脚本，有两个可选参数</p><p><code>--no-sim-tools</code> 不安装仿真环境</p><p><code>--no-nuttx</code> 不安装交叉编译环境</p><p>如果需要自己编译飞控固件，烧录到飞控中，那就需要交叉编译环境</p></div><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> update</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> &amp;&amp;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> upgrade</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt-get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ros-</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">$ROS_DISTRO</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">-gazebo-ros-pkgs</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ros-</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">$ROS_DISTRO</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">-gazebo-ros-control</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>安装好后，输入<code>gazebo</code>验证是否安装完成 <img src="`+o+`" alt=""></p><h2 id="编译无人机仿真环境" tabindex="-1"><a class="header-anchor" href="#编译无人机仿真环境"><span>编译无人机仿真环境</span></a></h2><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ~/PX4_Firmware</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">make</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> px4_sitl_default</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> gazebo</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">   # 这步可能有点慢，跟电脑配置有关</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+k+`" alt=""></p><h2 id="测试" tabindex="-1"><a class="header-anchor" href="#测试"><span>测试</span></a></h2><p>编辑<code>.bashrc</code></p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">code</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ~/.bashrc</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>添加</p><div class="language- line-numbers-mode" data-ext="" data-title=""><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span># &gt;&gt;&gt; PX4_Firmware &gt;&gt;&gt;</span></span>
<span class="line"><span># source ~/catkin_ws/devel/setup.bash  # 这个是个人的ROS工作空间，我们之后可以创建</span></span>
<span class="line"><span>source ~/PX4_Firmware/Tools/setup_gazebo.bash ~/PX4_Firmware/ ~/PX4_Firmware/build/px4_sitl_default</span></span>
<span class="line"><span>export ROS_PACKAGE_PATH=$ROS_PACKAGE_PATH:~/PX4_Firmware</span></span>
<span class="line"><span>export ROS_PACKAGE_PATH=$ROS_PACKAGE_PATH:~/PX4_Firmware/Tools/sitl_gazebo</span></span>
<span class="line"><span># &lt;&lt;&lt; PX4_Firmware &lt;&lt;&lt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>保存退出并<code>source ~/.bashrc</code></p><p>应该可以看到一段类似于这样的显示内容</p><p><img src="`+u+'" alt=""></p><p>这时候，我们就可以<mark>在任何目录下，启用仿真环境</mark>，输入</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">roslaunch</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> px4</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mavros_posix_sitl.launch</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="'+v+'" alt=""></p><p>接着新建一个终端，运行下面命令，查看MAVROS与仿真无人机通信状况</p><div class="language-sh line-numbers-mode" data-ext="sh" data-title="sh"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">rostopic</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> echo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /mavros/state</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> grep</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> connected</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    # 只查看 connected 信息</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="'+g+'" alt=""></p><p>我们还可以打开QGC地面站来对无人机进行操控</p><p><img src="'+m+'" alt=""></p><h2 id="总结-参考文章" tabindex="-1"><a class="header-anchor" href="#总结-参考文章"><span>总结 &amp; 参考文章</span></a></h2><p>OK😊！到此，我们的无人机仿真环境就基本配置完成了。我这篇文章主要参考的是<a href="https://blog.csdn.net/weixin_55944949/article/details/130895608" target="_blank" rel="noopener noreferrer">(最新)ubuntu搭建PX4无人机仿真环境(4) ——仿真环境搭建(以Ubuntu 18.04,ROS1 Melodic 为例)</a>，也利用了不少相关资源，在此表示非常感谢！！</p><p>如果在配置过程中遇到了问题，请及时在底部评论区留言。</p>',73))])}const C=t(b,[["render",y],["__file","index.html.vue"]]),_=JSON.parse('{"path":"/article/0dikfl77/","title":"WSL2搭建无人机仿真环境","lang":"zh-CN","frontmatter":{"title":"WSL2搭建无人机仿真环境","createTime":"2025/02/16 12:06:08","tags":["ROS","WSL","Ubuntu","PX4"],"permalink":"/article/0dikfl77/"},"headers":[],"readingTime":{"minutes":5.26,"words":1577},"git":{},"filePathRelative":"无人机/WSL2搭建无人机仿真环境.md","categoryList":[{"id":"fce4b7","sort":10001,"name":"无人机"}]}');export{C as comp,_ as data};
